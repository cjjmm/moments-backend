# å¤šåª’ä½“å±•ç¤ºè½¯ä»¶åç«¯ - é¡¹ç›®ç»“æ„è¯´æ˜

## é¡¹ç›®æ¦‚è¿°
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Spring Boot çš„å¤šåª’ä½“å±•ç¤ºè½¯ä»¶åç«¯ç³»ç»Ÿï¼ˆç±»ä¼¼æœ‹å‹åœˆï¼‰ï¼Œé‡‡ç”¨ç»å…¸çš„ä¸‰å±‚æ¶æ„ï¼ˆControllerã€Serviceã€DAOï¼‰ã€‚

## æŠ€æœ¯æ ˆ
- **Spring Boot 2.7.18**
- **MyBatis-Plus 3.5.3.1**ï¼ˆç®€åŒ– CRUD æ“ä½œï¼‰
- **MySQL 8.0**
- **Spring Security + JWT**ï¼ˆè®¤è¯æˆæƒï¼‰
- **Lombok**ï¼ˆç®€åŒ–ä»£ç ï¼‰
- **Java 11**

## é¡¹ç›®ç»“æ„

```
moments-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/
â”‚   â”‚   â”‚       â””â”€â”€ moments/
â”‚   â”‚   â”‚           â”œâ”€â”€ MomentsApplication.java          # ä¸»å¯åŠ¨ç±»
â”‚   â”‚   â”‚           â”œâ”€â”€ common/                          # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ Result.java                  # ç»Ÿä¸€è¿”å›ç»“æœ
â”‚   â”‚   â”‚           â”œâ”€â”€ config/                          # é…ç½®ç±»
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ MyBatisPlusConfig.java      # MyBatis-Plusé…ç½®
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ SecurityConfig.java         # Securityé…ç½®
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ WebConfig.java              # Webé…ç½®
â”‚   â”‚   â”‚           â”œâ”€â”€ controller/                      # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ UserController.java         # ç”¨æˆ·æ§åˆ¶å™¨
â”‚   â”‚   â”‚           â”œâ”€â”€ dto/                            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ LoginRequest.java           # ç™»å½•è¯·æ±‚DTO
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ RegisterRequest.java        # æ³¨å†Œè¯·æ±‚DTO
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PostCreateRequest.java      # åˆ›å»ºå¸–å­DTO
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ PostVO.java                 # å¸–å­å±•ç¤ºVO
â”‚   â”‚   â”‚           â”œâ”€â”€ entity/                         # å®ä½“ç±»
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ User.java                   # ç”¨æˆ·å®ä½“
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ Post.java                   # å¸–å­å®ä½“
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ Comment.java                # è¯„è®ºå®ä½“
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ Tag.java                    # æ ‡ç­¾å®ä½“
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ Media.java                  # åª’ä½“å®ä½“
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ Rating.java                 # è¯„åˆ†å®ä½“
â”‚   â”‚   â”‚           â”œâ”€â”€ exception/                      # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ BusinessException.java      # ä¸šåŠ¡å¼‚å¸¸
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ GlobalExceptionHandler.java # å…¨å±€å¼‚å¸¸å¤„ç†å™¨
â”‚   â”‚   â”‚           â”œâ”€â”€ mapper/                         # Mapperæ¥å£ï¼ˆDAOå±‚ï¼‰
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ UserMapper.java
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ PostMapper.java
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ CommentMapper.java
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ TagMapper.java
â”‚   â”‚   â”‚           â”‚   â”œâ”€â”€ MediaMapper.java
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ RatingMapper.java
â”‚   â”‚   â”‚           â”œâ”€â”€ service/                        # æœåŠ¡æ¥å£
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ UserService.java
â”‚   â”‚   â”‚           â”œâ”€â”€ service/impl/                   # æœåŠ¡å®ç°
â”‚   â”‚   â”‚           â”‚   â””â”€â”€ UserServiceImpl.java
â”‚   â”‚   â”‚           â””â”€â”€ util/                           # å·¥å…·ç±»
â”‚   â”‚   â”‚               â””â”€â”€ JwtUtil.java                # JWTå·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â””â”€â”€ application.yml                         # åº”ç”¨é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/                                       # æµ‹è¯•ä»£ç 
â””â”€â”€ pom.xml                                             # Mavené…ç½®æ–‡ä»¶
```

## å·²å®ç°åŠŸèƒ½

### âœ… åŸºç¡€æ¶æ„
- Spring Boot é¡¹ç›®åˆå§‹åŒ–
- Maven ä¾èµ–é…ç½®
- æ•°æ®åº“è¿æ¥é…ç½®
- MyBatis-Plus é›†æˆ
- Spring Security åŸºç¡€é…ç½®
- è·¨åŸŸé…ç½®
- å…¨å±€å¼‚å¸¸å¤„ç†

### âœ… ç”¨æˆ·æ¨¡å—
- ç”¨æˆ·æ³¨å†Œï¼ˆå¯†ç åŠ å¯†ï¼‰
- ç”¨æˆ·ç™»å½•ï¼ˆJWT Tokenï¼‰
- è·å–ç”¨æˆ·ä¿¡æ¯
- ä¿®æ”¹å¯†ç 

### âœ… æ•°æ®åº“è®¾è®¡
- 9å¼ è¡¨çš„å®Œæ•´è®¾è®¡ï¼ˆç”¨æˆ·ã€å¸–å­ã€åª’ä½“ã€æ ‡ç­¾ã€è¯„è®ºã€è¯„åˆ†ç­‰ï¼‰
- ç´¢å¼•ä¼˜åŒ–
- åˆå§‹åŒ–æ•°æ®

### âœ… API æ¥å£æ–‡æ¡£
- å®Œæ•´çš„ RESTful API è®¾è®¡
- 8å¤§æ¨¡å—æ¥å£å®šä¹‰
- è¯·æ±‚/å“åº”æ ¼å¼è§„èŒƒ

## å¾…å®ç°åŠŸèƒ½

### ğŸ”² å¸–å­æ¨¡å—
- PostService å’Œ PostServiceImpl
- PostController
- å‘å¸ƒã€æŸ¥è¯¢ã€ä¿®æ”¹ã€åˆ é™¤ã€æœç´¢åŠŸèƒ½
- æ ‡ç­¾å…³è”å¤„ç†
- åª’ä½“æ–‡ä»¶å…³è”

### ğŸ”² è¯„è®ºæ¨¡å—
- CommentService å’Œ CommentServiceImpl
- CommentController

### ğŸ”² è¯„åˆ†æ¨¡å—
- RatingService å’Œ RatingServiceImpl
- RatingControllerï¼ˆæš‚æœªåˆ›å»ºï¼‰

### ğŸ”² æ–‡ä»¶ä¸Šä¼ æ¨¡å—
- FileService å’Œ FileServiceImpl
- FileController
- å›¾ç‰‡/è§†é¢‘ä¸Šä¼ å¤„ç†
- æ–‡ä»¶å¤§å°é™åˆ¶
- æ–‡ä»¶ç±»å‹æ ¡éªŒ

### ğŸ”² ç®¡ç†å‘˜æ¨¡å—
- AdminController
- ç”¨æˆ·ç®¡ç†
- å†…å®¹ç®¡ç†
- ç»Ÿè®¡åˆ†æ

### ğŸ”² åŠ åˆ†é¡¹åŠŸèƒ½
- æ•æ„Ÿè¯è¿‡æ»¤å·¥å…·ç±»
- å¥½å‹åŠŸèƒ½
- å¤§æ¨¡å‹é›†æˆ

### ğŸ”² JWT è®¤è¯
- JWT è¿‡æ»¤å™¨
- å®Œæ•´çš„è®¤è¯æµç¨‹

## ä¸‹ä¸€æ­¥å·¥ä½œå»ºè®®

1. **å…ˆå®Œæˆæ•°æ®åº“åˆå§‹åŒ–**
   - æ‰§è¡Œ `database_design.sql` åˆ›å»ºè¡¨ç»“æ„
   - ä¿®æ”¹ `application.yml` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯

2. **å®Œå–„å¸–å­æ¨¡å—**ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
   - åˆ›å»º PostService å’Œå®ç°ç±»
   - åˆ›å»º PostController
   - å®ç°å‘å¸ƒã€æŸ¥è¯¢ã€åˆ é™¤åŠŸèƒ½

3. **å®Œå–„æ–‡ä»¶ä¸Šä¼ æ¨¡å—**
   - åˆ›å»º FileService å’Œå®ç°ç±»
   - åˆ›å»º FileController
   - æµ‹è¯•å›¾ç‰‡ä¸Šä¼ 

4. **å®Œå–„è¯„è®ºå’Œè¯„åˆ†æ¨¡å—**

5. **å®Œå–„ç®¡ç†å‘˜åå°**

6. **éƒ¨ç½²åˆ°æœåŠ¡å™¨**
   - é…ç½®æœåŠ¡å™¨ç¯å¢ƒ
   - éƒ¨ç½²åº”ç”¨
   - æµ‹è¯•å‰ç«¯å¯¹æ¥

## å¿«é€Ÿå¯åŠ¨

### å‰ç½®æ¡ä»¶
1. å®‰è£… JDK 11 æˆ– 17
2. å®‰è£… Maven
3. å®‰è£… MySQL 8.0

### å¯åŠ¨æ­¥éª¤
1. åˆ›å»ºæ•°æ®åº“å¹¶æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
```sql
-- åœ¨ MySQL ä¸­æ‰§è¡Œ
source /path/to/database_design.sql
```

2. ä¿®æ”¹ `application.yml` é…ç½®
```yaml
spring:
  datasource:
    username: root
    password: your_password  # ä¿®æ”¹ä¸ºå®é™…å¯†ç 
```

3. ç¼–è¯‘å¹¶è¿è¡Œ
```bash
cd moments-backend
mvn clean compile
mvn spring-boot:run
```

4. è®¿é—®æµ‹è¯•
```
http://localhost:8080
```

## æ¥å£æµ‹è¯•ç¤ºä¾‹

### ç”¨æˆ·æ³¨å†Œ
```bash
curl -X POST http://localhost:8080/api/v1/users/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test001","password":"123456","nickname":"æµ‹è¯•ç”¨æˆ·"}'
```

### ç”¨æˆ·ç™»å½•
```bash
curl -X POST http://localhost:8080/api/v1/users/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test001","password":"123456"}'
```

## æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**ï¼šæ‰€æœ‰å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
2. **JWT é…ç½®**ï¼šç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹ `jwt.secret`
3. **æ–‡ä»¶ä¸Šä¼ è·¯å¾„**ï¼šéœ€è¦åˆ›å»º `C:/upload/moments/` ç›®å½•ï¼ˆæˆ–ä¿®æ”¹é…ç½®ï¼‰
4. **è·¨åŸŸé…ç½®**ï¼šå¼€å‘é˜¶æ®µå…è®¸æ‰€æœ‰åŸŸï¼Œç”Ÿäº§ç¯å¢ƒéœ€é™åˆ¶
5. **å®‰å…¨è®¤è¯**ï¼šå½“å‰ Security é…ç½®è¾ƒå®½æ¾ï¼Œåç»­éœ€æ·»åŠ  JWT è¿‡æ»¤å™¨

## æ–‡æ¡£èµ„æº

é¡¹ç›®ç›¸å…³æ–‡æ¡£ä½äº `.gemini/antigravity/brain/` ç›®å½•ï¼š
- `api_documentation.md` - API æ¥å£æ–‡æ¡£
- `database_design.sql` - æ•°æ®åº“è®¾è®¡è„šæœ¬
- `implementation_plan.md` - å®ç°è®¡åˆ’
- `task.md` - ä»»åŠ¡æ¸…å•
