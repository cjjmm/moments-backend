import{d as y,u as b,r as c,a as V,c as x,b as g,e as o,w as a,f as h,g as l,h as k,o as C,i as L,E as R,_ as z}from"./index-DyLS0FzD.js";const B={class:"login-container"},E={class:"login-box"},F=y({__name:"Login",setup(N){const f=k(),t=b(),n=c(),r=c(!1),s=V({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},d=async()=>{n.value&&await n.value.validate(async m=>{if(m){r.value=!0;try{await t.login(s)&&(t.isAdmin()?f.push("/admin"):(R.warning("您不是管理员,无法访问后台"),t.logout()))}finally{r.value=!1}}})};return(m,e)=>{const p=l("el-input"),i=l("el-form-item"),w=l("el-button"),v=l("el-form");return C(),x("div",B,[g("div",E,[e[3]||(e[3]=g("h2",{class:"login-title"},"管理后台登录",-1)),o(v,{ref_key:"loginFormRef",ref:n,model:s,rules:_,class:"login-form",onKeyup:h(d,["enter"])},{default:a(()=>[o(i,{prop:"username"},{default:a(()=>[o(p,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:a(()=>[o(p,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),o(i,null,{default:a(()=>[o(w,{type:"primary",size:"large",loading:r.value,class:"login-button",onClick:d},{default:a(()=>[...e[2]||(e[2]=[L(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}}),q=z(F,[["__scopeId","data-v-5b218eef"]]);export{q as default};
