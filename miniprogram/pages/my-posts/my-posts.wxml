<!--pages/my-posts/my-posts.wxml-->
<view class="container">
  <view class="post-list" wx:if="{{postList.length > 0}}">
    <view class="post-card" wx:for="{{postList}}" wx:key="postId">
      <view class="post-header" data-id="{{item.postId}}" bindtap="goToDetail">
        <view class="post-info">
          <text class="post-content">{{item.content}}</text>
          <text class="post-time">{{item.createTime}}</text>
        </view>
        <view class="media-type">
          <text wx:if="{{item.mediaType === 'IMAGE'}}">ğŸ–¼ï¸</text>
          <text wx:elif="{{item.mediaType === 'VIDEO'}}">ğŸ¬</text>
          <text wx:else>ğŸ“</text>
        </view>
      </view>
      
      <!-- åª’ä½“é¢„è§ˆ -->
      <view class="media-preview" wx:if="{{item.mediaUrls && item.mediaUrls.length > 0}}" data-id="{{item.postId}}" bindtap="goToDetail">
        <image 
          wx:if="{{item.mediaType === 'IMAGE'}}"
          class="preview-image"
          src="{{item.mediaUrls[0]}}"
          mode="aspectFill"
        ></image>
        <view class="video-cover" wx:if="{{item.mediaType === 'VIDEO'}}">
          <text class="play-icon">â–¶ï¸</text>
        </view>
      </view>
      
      <!-- ç»Ÿè®¡ -->
      <view class="post-stats">
        <text>ğŸ‘ {{item.likeCount || 0}}</text>
        <text>ğŸ’¬ {{item.commentCount || 0}}</text>
        <text>â­ {{item.avgRating || 0}}</text>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="post-actions">
        <button class="action-btn edit" data-id="{{item.postId}}" catchtap="editPost">
          ç¼–è¾‘
        </button>
        <button class="action-btn delete" data-id="{{item.postId}}" catchtap="deletePost">
          åˆ é™¤
        </button>
      </view>
    </view>
  </view>
  
  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && postList.length === 0}}">
    <text class="empty-icon">ğŸ“­</text>
    <text class="empty-text">è¿˜æ²¡æœ‰å‘å¸ƒè¿‡å†…å®¹</text>
    <navigator url="/pages/publish/publish" class="publish-btn">å»å‘å¸ƒ</navigator>
  </view>
  
  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <!-- æ²¡æœ‰æ›´å¤š -->
  <view class="no-more" wx:if="{{!hasMore && postList.length > 0}}">
    <text>â€” æ²¡æœ‰æ›´å¤šäº† â€”</text>
  </view>
</view>
